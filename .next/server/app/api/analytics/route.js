/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/analytics/route";
exports.ids = ["app/api/analytics/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Froute&page=%2Fapi%2Fanalytics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Froute.ts&appDir=C%3A%5CUsers%5Carnav%5COneDrive%5CDesktop%5CScheme-Saathi%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Carnav%5COneDrive%5CDesktop%5CScheme-Saathi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Froute&page=%2Fapi%2Fanalytics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Froute.ts&appDir=C%3A%5CUsers%5Carnav%5COneDrive%5CDesktop%5CScheme-Saathi%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Carnav%5COneDrive%5CDesktop%5CScheme-Saathi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_arnav_OneDrive_Desktop_Scheme_Saathi_app_api_analytics_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/analytics/route.ts */ \"(rsc)/./app/api/analytics/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/analytics/route\",\n        pathname: \"/api/analytics\",\n        filename: \"route\",\n        bundlePath: \"app/api/analytics/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\arnav\\\\OneDrive\\\\Desktop\\\\Scheme-Saathi\\\\app\\\\api\\\\analytics\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_arnav_OneDrive_Desktop_Scheme_Saathi_app_api_analytics_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/analytics/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbmFseXRpY3MlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFuYWx5dGljcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmFuYWx5dGljcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNhcm5hdiU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q1NjaGVtZS1TYWF0aGklNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q2FybmF2JTVDT25lRHJpdmUlNUNEZXNrdG9wJTVDU2NoZW1lLVNhYXRoaSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDaUM7QUFDOUc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zY2hlbWUtc2F0aGkvP2M1YWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcYXJuYXZcXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxTY2hlbWUtU2FhdGhpXFxcXGFwcFxcXFxhcGlcXFxcYW5hbHl0aWNzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXRpY3Mvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hbmFseXRpY3NcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FuYWx5dGljcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGFybmF2XFxcXE9uZURyaXZlXFxcXERlc2t0b3BcXFxcU2NoZW1lLVNhYXRoaVxcXFxhcHBcXFxcYXBpXFxcXGFuYWx5dGljc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYW5hbHl0aWNzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Froute&page=%2Fapi%2Fanalytics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Froute.ts&appDir=C%3A%5CUsers%5Carnav%5COneDrive%5CDesktop%5CScheme-Saathi%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Carnav%5COneDrive%5CDesktop%5CScheme-Saathi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/analytics/route.ts":
/*!************************************!*\
  !*** ./app/api/analytics/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @supabase/auth-helpers-nextjs */ \"(rsc)/./node_modules/@supabase/auth-helpers-nextjs/dist/index.js\");\n/* harmony import */ var _supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\n\nasync function GET(request) {\n    try {\n        const supabase = (0,_supabase_auth_helpers_nextjs__WEBPACK_IMPORTED_MODULE_1__.createRouteHandlerClient)({\n            cookies: next_headers__WEBPACK_IMPORTED_MODULE_2__.cookies\n        });\n        const { searchParams } = new URL(request.url);\n        const timeframe = searchParams.get(\"timeframe\") || \"7d\";\n        const userId = searchParams.get(\"userId\");\n        // Get current user - if no user, return demo data\n        const { data: { user }, error: authError } = await supabase.auth.getUser();\n        // If we have a real authenticated user, fetch their real data\n        if (user && !authError) {\n            console.log(\"Fetching real analytics data for user:\", user.id);\n            try {\n                // Calculate date range\n                const now = new Date();\n                const daysBack = timeframe === \"30d\" ? 30 : timeframe === \"7d\" ? 7 : 1;\n                const startDate = new Date(now.getTime() - daysBack * 24 * 60 * 60 * 1000);\n                // Try to get real user interactions\n                const { data: interactions, error: interactionsError } = await supabase.from(\"user_interactions\").select(\"interaction_type, timestamp, interaction_data\").eq(\"user_id\", userId || user.id).gte(\"timestamp\", startDate.toISOString()).order(\"timestamp\", {\n                    ascending: false\n                });\n                if (interactionsError) throw interactionsError;\n                // Get application analytics\n                const { data: applications, error: applicationsError } = await supabase.from(\"scheme_applications\").select(\"application_status, submitted_at, scheme_name, updated_at\").eq(\"user_id\", userId || user.id).gte(\"submitted_at\", startDate.toISOString());\n                if (applicationsError) throw applicationsError;\n                // Get scheme bookmarks\n                const { data: bookmarks, error: bookmarksError } = await supabase.from(\"user_schemes\").select(\"scheme_name, scheme_category, created_at, interaction_count\").eq(\"user_id\", userId || user.id).eq(\"bookmarked\", true);\n                if (bookmarksError) throw bookmarksError;\n                // Process analytics data\n                const analytics = {\n                    // Basic metrics\n                    totalInteractions: interactions?.length || 0,\n                    totalApplications: applications?.length || 0,\n                    totalBookmarks: bookmarks?.length || 0,\n                    // Interaction breakdown\n                    interactionsByType: interactions?.reduce((acc, item)=>{\n                        acc[item.interaction_type] = (acc[item.interaction_type] || 0) + 1;\n                        return acc;\n                    }, {}) || {},\n                    // Daily activity pattern\n                    dailyActivity: generateDailyActivity(interactions || [], startDate, now),\n                    // Application status distribution\n                    applicationStats: {\n                        total: applications?.length || 0,\n                        byStatus: applications?.reduce((acc, item)=>{\n                            acc[item.application_status] = (acc[item.application_status] || 0) + 1;\n                            return acc;\n                        }, {}) || {},\n                        recentApplications: applications?.slice(0, 5) || []\n                    },\n                    // Popular scheme categories\n                    popularCategories: bookmarks?.reduce((acc, item)=>{\n                        acc[item.scheme_category] = (acc[item.scheme_category] || 0) + 1;\n                        return acc;\n                    }, {}) || {},\n                    // User engagement metrics\n                    engagement: {\n                        avgInteractionsPerDay: Math.round((interactions?.length || 0) / daysBack),\n                        mostActiveHour: getMostActiveHour(interactions || []),\n                        streakDays: calculateStreakDays(interactions || []),\n                        completionRate: calculateCompletionRate(applications || [])\n                    },\n                    // Insights and recommendations\n                    insights: generateInsights(interactions || [], applications || [], bookmarks || []),\n                    timeframe,\n                    isDemo: false,\n                    generatedAt: new Date().toISOString()\n                };\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(analytics);\n            } catch (realDataError) {\n                console.error(\"Error fetching real data, falling back to demo:\", realDataError);\n            // Fall back to demo data if real data fails\n            }\n        }\n        // Return demo data for unauthenticated users or if real data fails\n        console.log(\"Returning demo analytics data\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(getDemoAnalyticsData());\n    } catch (error) {\n        console.error(\"Analytics error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\nfunction generateDailyActivity(interactions, startDate, endDate) {\n    const dailyData = [];\n    const current = new Date(startDate);\n    while(current <= endDate){\n        const dayStr = current.toISOString().split(\"T\")[0];\n        const dayInteractions = interactions.filter((i)=>i.timestamp.startsWith(dayStr));\n        dailyData.push({\n            date: dayStr,\n            interactions: dayInteractions.length,\n            types: dayInteractions.reduce((acc, item)=>{\n                acc[item.interaction_type] = (acc[item.interaction_type] || 0) + 1;\n                return acc;\n            }, {})\n        });\n        current.setDate(current.getDate() + 1);\n    }\n    return dailyData;\n}\nfunction getMostActiveHour(interactions) {\n    const hourCounts = interactions.reduce((acc, item)=>{\n        const hour = new Date(item.timestamp).getHours();\n        acc[hour] = (acc[hour] || 0) + 1;\n        return acc;\n    }, {});\n    const entries = Object.entries(hourCounts).sort(([, a], [, b])=>Number(b) - Number(a));\n    return entries[0] ? Number(entries[0][0]) : 12;\n}\nfunction calculateStreakDays(interactions) {\n    const daySet = new Set(interactions.map((i)=>i.timestamp.split(\"T\")[0]));\n    const uniqueDays = Array.from(daySet).sort();\n    let currentStreak = 0;\n    for(let i = uniqueDays.length - 1; i >= 0; i--){\n        const current = new Date(uniqueDays[i]);\n        const expected = new Date();\n        expected.setDate(expected.getDate() - currentStreak);\n        if (current.toDateString() === expected.toDateString()) {\n            currentStreak++;\n        } else {\n            break;\n        }\n    }\n    return currentStreak;\n}\nfunction calculateCompletionRate(applications) {\n    if (applications.length === 0) return 0;\n    const completed = applications.filter((app)=>app.application_status === \"approved\" || app.application_status === \"rejected\").length;\n    return Math.round(completed / applications.length * 100);\n}\nfunction generateInsights(interactions, applications, bookmarks) {\n    const insights = [];\n    // Activity insights\n    if (interactions.length > 0) {\n        const recentActivity = interactions.slice(0, 10);\n        const uniqueTypes = new Set(recentActivity.map((i)=>i.interaction_type));\n        if (uniqueTypes.size > 3) {\n            insights.push({\n                type: \"positive\",\n                title: \"Great Engagement!\",\n                message: `You're actively using ${uniqueTypes.size} different features. Keep exploring!`\n            });\n        }\n    }\n    // Application insights\n    if (applications.length > 0) {\n        const pendingApps = applications.filter((app)=>app.application_status === \"submitted\" || app.application_status === \"under_review\").length;\n        if (pendingApps > 0) {\n            insights.push({\n                type: \"info\",\n                title: \"Applications in Progress\",\n                message: `You have ${pendingApps} applications being processed. We'll notify you of updates!`\n            });\n        }\n    }\n    // Recommendation insights\n    if (bookmarks.length > 2) {\n        insights.push({\n            type: \"suggestion\",\n            title: \"Ready to Apply?\",\n            message: `You've bookmarked ${bookmarks.length} schemes. Consider applying to the ones that match your profile best!`\n        });\n    }\n    return insights;\n}\n// Demo data function for when user is not authenticated\nfunction getDemoAnalyticsData() {\n    const now = new Date();\n    const dailyActivity = Array.from({\n        length: 7\n    }, (_, i)=>({\n            date: new Date(now.getTime() - (6 - i) * 24 * 60 * 60 * 1000).toISOString().split(\"T\")[0],\n            interactions: Math.floor(Math.random() * 15) + 5,\n            schemes_viewed: Math.floor(Math.random() * 8) + 2,\n            applications: Math.floor(Math.random() * 3)\n        }));\n    const weeklyEngagement = [\n        {\n            day: \"Mon\",\n            page_views: 12,\n            searches: 8,\n            applications: 2\n        },\n        {\n            day: \"Tue\",\n            page_views: 15,\n            searches: 6,\n            applications: 1\n        },\n        {\n            day: \"Wed\",\n            page_views: 18,\n            searches: 10,\n            applications: 3\n        },\n        {\n            day: \"Thu\",\n            page_views: 14,\n            searches: 7,\n            applications: 1\n        },\n        {\n            day: \"Fri\",\n            page_views: 20,\n            searches: 12,\n            applications: 4\n        },\n        {\n            day: \"Sat\",\n            page_views: 8,\n            searches: 4,\n            applications: 0\n        },\n        {\n            day: \"Sun\",\n            page_views: 6,\n            searches: 3,\n            applications: 1\n        }\n    ];\n    const applicationStatus = [\n        {\n            status: \"approved\",\n            count: 5,\n            percentage: 25\n        },\n        {\n            status: \"under_review\",\n            count: 8,\n            percentage: 40\n        },\n        {\n            status: \"submitted\",\n            count: 4,\n            percentage: 20\n        },\n        {\n            status: \"draft\",\n            count: 3,\n            percentage: 15\n        }\n    ];\n    const interactionTypes = {\n        page_view: 45,\n        scheme_search: 25,\n        chat_message: 12,\n        document_upload: 8,\n        profile_update: 5,\n        voice_query: 5\n    };\n    const metrics = {\n        totalInteractions: 85,\n        averageDaily: 12.1,\n        streakDays: 5,\n        mostActiveDay: \"Friday\",\n        totalApplications: 12,\n        successRate: 65\n    };\n    const insights = [\n        {\n            type: \"success\",\n            title: \"Great Progress!\",\n            message: \"You've been consistently active for 5 days straight. Keep up the good work!\"\n        },\n        {\n            type: \"info\",\n            title: \"Applications in Progress\",\n            message: \"You have 8 applications being processed. We'll notify you of updates!\"\n        },\n        {\n            type: \"suggestion\",\n            title: \"Ready to Apply?\",\n            message: \"You've bookmarked 6 schemes. Consider applying to the ones that match your profile best!\"\n        }\n    ];\n    return {\n        totalInteractions: 85,\n        totalApplications: 12,\n        totalBookmarks: 6,\n        interactionsByType: interactionTypes,\n        dailyActivity,\n        applicationStats: {\n            total: 12,\n            byStatus: {\n                approved: 5,\n                under_review: 8,\n                submitted: 4,\n                draft: 3\n            },\n            recentApplications: []\n        },\n        popularCategories: {\n            \"Housing\": 3,\n            \"Agriculture\": 2,\n            \"Health\": 1\n        },\n        engagement: {\n            avgInteractionsPerDay: 12.1,\n            mostActiveHour: 14,\n            streakDays: 5,\n            completionRate: 65\n        },\n        insights,\n        timeframe: \"7d\",\n        isDemo: true\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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XSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcclxuaW1wb3J0IHsgY3JlYXRlUm91dGVIYW5kbGVyQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL2F1dGgtaGVscGVycy1uZXh0anMnO1xyXG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSAnbmV4dC9oZWFkZXJzJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVSb3V0ZUhhbmRsZXJDbGllbnQoeyBjb29raWVzIH0pO1xyXG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xyXG4gICAgY29uc3QgdGltZWZyYW1lID0gc2VhcmNoUGFyYW1zLmdldCgndGltZWZyYW1lJykgfHwgJzdkJztcclxuICAgIGNvbnN0IHVzZXJJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ3VzZXJJZCcpO1xyXG5cclxuICAgIC8vIEdldCBjdXJyZW50IHVzZXIgLSBpZiBubyB1c2VyLCByZXR1cm4gZGVtbyBkYXRhXHJcbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvcjogYXV0aEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKTtcclxuICAgIFxyXG4gICAgLy8gSWYgd2UgaGF2ZSBhIHJlYWwgYXV0aGVudGljYXRlZCB1c2VyLCBmZXRjaCB0aGVpciByZWFsIGRhdGFcclxuICAgIGlmICh1c2VyICYmICFhdXRoRXJyb3IpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0ZldGNoaW5nIHJlYWwgYW5hbHl0aWNzIGRhdGEgZm9yIHVzZXI6JywgdXNlci5pZCk7XHJcbiAgICAgIFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIENhbGN1bGF0ZSBkYXRlIHJhbmdlXHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCBkYXlzQmFjayA9IHRpbWVmcmFtZSA9PT0gJzMwZCcgPyAzMCA6IHRpbWVmcmFtZSA9PT0gJzdkJyA/IDcgOiAxO1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKG5vdy5nZXRUaW1lKCkgLSAoZGF5c0JhY2sgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7XHJcblxyXG4gICAgICAgIC8vIFRyeSB0byBnZXQgcmVhbCB1c2VyIGludGVyYWN0aW9uc1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogaW50ZXJhY3Rpb25zLCBlcnJvcjogaW50ZXJhY3Rpb25zRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgndXNlcl9pbnRlcmFjdGlvbnMnKVxyXG4gICAgICAgICAgLnNlbGVjdCgnaW50ZXJhY3Rpb25fdHlwZSwgdGltZXN0YW1wLCBpbnRlcmFjdGlvbl9kYXRhJylcclxuICAgICAgICAgIC5lcSgndXNlcl9pZCcsIHVzZXJJZCB8fCB1c2VyLmlkKVxyXG4gICAgICAgICAgLmd0ZSgndGltZXN0YW1wJywgc3RhcnREYXRlLnRvSVNPU3RyaW5nKCkpXHJcbiAgICAgICAgICAub3JkZXIoJ3RpbWVzdGFtcCcsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcclxuXHJcbiAgICAgICAgaWYgKGludGVyYWN0aW9uc0Vycm9yKSB0aHJvdyBpbnRlcmFjdGlvbnNFcnJvcjtcclxuXHJcbiAgICAgICAgLy8gR2V0IGFwcGxpY2F0aW9uIGFuYWx5dGljc1xyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogYXBwbGljYXRpb25zLCBlcnJvcjogYXBwbGljYXRpb25zRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAuZnJvbSgnc2NoZW1lX2FwcGxpY2F0aW9ucycpXHJcbiAgICAgICAgICAuc2VsZWN0KCdhcHBsaWNhdGlvbl9zdGF0dXMsIHN1Ym1pdHRlZF9hdCwgc2NoZW1lX25hbWUsIHVwZGF0ZWRfYXQnKVxyXG4gICAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkIHx8IHVzZXIuaWQpXHJcbiAgICAgICAgICAuZ3RlKCdzdWJtaXR0ZWRfYXQnLCBzdGFydERhdGUudG9JU09TdHJpbmcoKSk7XHJcblxyXG4gICAgICAgIGlmIChhcHBsaWNhdGlvbnNFcnJvcikgdGhyb3cgYXBwbGljYXRpb25zRXJyb3I7XHJcblxyXG4gICAgICAgIC8vIEdldCBzY2hlbWUgYm9va21hcmtzXHJcbiAgICAgICAgY29uc3QgeyBkYXRhOiBib29rbWFya3MsIGVycm9yOiBib29rbWFya3NFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCd1c2VyX3NjaGVtZXMnKVxyXG4gICAgICAgICAgLnNlbGVjdCgnc2NoZW1lX25hbWUsIHNjaGVtZV9jYXRlZ29yeSwgY3JlYXRlZF9hdCwgaW50ZXJhY3Rpb25fY291bnQnKVxyXG4gICAgICAgICAgLmVxKCd1c2VyX2lkJywgdXNlcklkIHx8IHVzZXIuaWQpXHJcbiAgICAgICAgICAuZXEoJ2Jvb2ttYXJrZWQnLCB0cnVlKTtcclxuXHJcbiAgICAgICAgaWYgKGJvb2ttYXJrc0Vycm9yKSB0aHJvdyBib29rbWFya3NFcnJvcjtcclxuXHJcbiAgICAgICAgLy8gUHJvY2VzcyBhbmFseXRpY3MgZGF0YVxyXG4gICAgICAgIGNvbnN0IGFuYWx5dGljcyA9IHtcclxuICAgICAgICAgIC8vIEJhc2ljIG1ldHJpY3NcclxuICAgICAgICAgIHRvdGFsSW50ZXJhY3Rpb25zOiBpbnRlcmFjdGlvbnM/Lmxlbmd0aCB8fCAwLFxyXG4gICAgICAgICAgdG90YWxBcHBsaWNhdGlvbnM6IGFwcGxpY2F0aW9ucz8ubGVuZ3RoIHx8IDAsXHJcbiAgICAgICAgICB0b3RhbEJvb2ttYXJrczogYm9va21hcmtzPy5sZW5ndGggfHwgMCxcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gSW50ZXJhY3Rpb24gYnJlYWtkb3duXHJcbiAgICAgICAgICBpbnRlcmFjdGlvbnNCeVR5cGU6IGludGVyYWN0aW9ucz8ucmVkdWNlKChhY2MsIGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgYWNjW2l0ZW0uaW50ZXJhY3Rpb25fdHlwZV0gPSAoYWNjW2l0ZW0uaW50ZXJhY3Rpb25fdHlwZV0gfHwgMCkgKyAxO1xyXG4gICAgICAgICAgICByZXR1cm4gYWNjO1xyXG4gICAgICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPikgfHwge30sXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIERhaWx5IGFjdGl2aXR5IHBhdHRlcm5cclxuICAgICAgICAgIGRhaWx5QWN0aXZpdHk6IGdlbmVyYXRlRGFpbHlBY3Rpdml0eShpbnRlcmFjdGlvbnMgfHwgW10sIHN0YXJ0RGF0ZSwgbm93KSxcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQXBwbGljYXRpb24gc3RhdHVzIGRpc3RyaWJ1dGlvblxyXG4gICAgICAgICAgYXBwbGljYXRpb25TdGF0czoge1xyXG4gICAgICAgICAgICB0b3RhbDogYXBwbGljYXRpb25zPy5sZW5ndGggfHwgMCxcclxuICAgICAgICAgICAgYnlTdGF0dXM6IGFwcGxpY2F0aW9ucz8ucmVkdWNlKChhY2MsIGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICBhY2NbaXRlbS5hcHBsaWNhdGlvbl9zdGF0dXNdID0gKGFjY1tpdGVtLmFwcGxpY2F0aW9uX3N0YXR1c10gfHwgMCkgKyAxO1xyXG4gICAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICAgIH0sIHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj4pIHx8IHt9LFxyXG4gICAgICAgICAgICByZWNlbnRBcHBsaWNhdGlvbnM6IGFwcGxpY2F0aW9ucz8uc2xpY2UoMCwgNSkgfHwgW11cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFBvcHVsYXIgc2NoZW1lIGNhdGVnb3JpZXNcclxuICAgICAgICAgIHBvcHVsYXJDYXRlZ29yaWVzOiBib29rbWFya3M/LnJlZHVjZSgoYWNjLCBpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGFjY1tpdGVtLnNjaGVtZV9jYXRlZ29yeV0gPSAoYWNjW2l0ZW0uc2NoZW1lX2NhdGVnb3J5XSB8fCAwKSArIDE7XHJcbiAgICAgICAgICAgIHJldHVybiBhY2M7XHJcbiAgICAgICAgICB9LCB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+KSB8fCB7fSxcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gVXNlciBlbmdhZ2VtZW50IG1ldHJpY3NcclxuICAgICAgICAgIGVuZ2FnZW1lbnQ6IHtcclxuICAgICAgICAgICAgYXZnSW50ZXJhY3Rpb25zUGVyRGF5OiBNYXRoLnJvdW5kKChpbnRlcmFjdGlvbnM/Lmxlbmd0aCB8fCAwKSAvIGRheXNCYWNrKSxcclxuICAgICAgICAgICAgbW9zdEFjdGl2ZUhvdXI6IGdldE1vc3RBY3RpdmVIb3VyKGludGVyYWN0aW9ucyB8fCBbXSksXHJcbiAgICAgICAgICAgIHN0cmVha0RheXM6IGNhbGN1bGF0ZVN0cmVha0RheXMoaW50ZXJhY3Rpb25zIHx8IFtdKSxcclxuICAgICAgICAgICAgY29tcGxldGlvblJhdGU6IGNhbGN1bGF0ZUNvbXBsZXRpb25SYXRlKGFwcGxpY2F0aW9ucyB8fCBbXSlcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEluc2lnaHRzIGFuZCByZWNvbW1lbmRhdGlvbnNcclxuICAgICAgICAgIGluc2lnaHRzOiBnZW5lcmF0ZUluc2lnaHRzKGludGVyYWN0aW9ucyB8fCBbXSwgYXBwbGljYXRpb25zIHx8IFtdLCBib29rbWFya3MgfHwgW10pLFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICB0aW1lZnJhbWUsXHJcbiAgICAgICAgICBpc0RlbW86IGZhbHNlLFxyXG4gICAgICAgICAgZ2VuZXJhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihhbmFseXRpY3MpO1xyXG4gICAgICB9IGNhdGNoIChyZWFsRGF0YUVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcmVhbCBkYXRhLCBmYWxsaW5nIGJhY2sgdG8gZGVtbzonLCByZWFsRGF0YUVycm9yKTtcclxuICAgICAgICAvLyBGYWxsIGJhY2sgdG8gZGVtbyBkYXRhIGlmIHJlYWwgZGF0YSBmYWlsc1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmV0dXJuIGRlbW8gZGF0YSBmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJzIG9yIGlmIHJlYWwgZGF0YSBmYWlsc1xyXG4gICAgY29uc29sZS5sb2coJ1JldHVybmluZyBkZW1vIGFuYWx5dGljcyBkYXRhJyk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZ2V0RGVtb0FuYWx5dGljc0RhdGEoKSk7XHJcbiAgICBcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQW5hbHl0aWNzIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVEYWlseUFjdGl2aXR5KGludGVyYWN0aW9uczogYW55W10sIHN0YXJ0RGF0ZTogRGF0ZSwgZW5kRGF0ZTogRGF0ZSkge1xyXG4gIGNvbnN0IGRhaWx5RGF0YSA9IFtdO1xyXG4gIGNvbnN0IGN1cnJlbnQgPSBuZXcgRGF0ZShzdGFydERhdGUpO1xyXG4gIFxyXG4gIHdoaWxlIChjdXJyZW50IDw9IGVuZERhdGUpIHtcclxuICAgIGNvbnN0IGRheVN0ciA9IGN1cnJlbnQudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG4gICAgY29uc3QgZGF5SW50ZXJhY3Rpb25zID0gaW50ZXJhY3Rpb25zLmZpbHRlcihpID0+IFxyXG4gICAgICBpLnRpbWVzdGFtcC5zdGFydHNXaXRoKGRheVN0cilcclxuICAgICk7XHJcbiAgICBcclxuICAgIGRhaWx5RGF0YS5wdXNoKHtcclxuICAgICAgZGF0ZTogZGF5U3RyLFxyXG4gICAgICBpbnRlcmFjdGlvbnM6IGRheUludGVyYWN0aW9ucy5sZW5ndGgsXHJcbiAgICAgIHR5cGVzOiBkYXlJbnRlcmFjdGlvbnMucmVkdWNlKChhY2MsIGl0ZW0pID0+IHtcclxuICAgICAgICBhY2NbaXRlbS5pbnRlcmFjdGlvbl90eXBlXSA9IChhY2NbaXRlbS5pbnRlcmFjdGlvbl90eXBlXSB8fCAwKSArIDE7XHJcbiAgICAgICAgcmV0dXJuIGFjYztcclxuICAgICAgfSwge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPilcclxuICAgIH0pO1xyXG4gICAgXHJcbiAgICBjdXJyZW50LnNldERhdGUoY3VycmVudC5nZXREYXRlKCkgKyAxKTtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGRhaWx5RGF0YTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TW9zdEFjdGl2ZUhvdXIoaW50ZXJhY3Rpb25zOiBhbnlbXSkge1xyXG4gIGNvbnN0IGhvdXJDb3VudHMgPSBpbnRlcmFjdGlvbnMucmVkdWNlKChhY2MsIGl0ZW0pID0+IHtcclxuICAgIGNvbnN0IGhvdXIgPSBuZXcgRGF0ZShpdGVtLnRpbWVzdGFtcCkuZ2V0SG91cnMoKTtcclxuICAgIGFjY1tob3VyXSA9IChhY2NbaG91cl0gfHwgMCkgKyAxO1xyXG4gICAgcmV0dXJuIGFjYztcclxuICB9LCB7fSBhcyBSZWNvcmQ8bnVtYmVyLCBudW1iZXI+KTtcclxuICBcclxuICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoaG91ckNvdW50cylcclxuICAgIC5zb3J0KChbLGFdLCBbLGJdKSA9PiAoTnVtYmVyKGIpIC0gTnVtYmVyKGEpKSk7XHJcbiAgXHJcbiAgcmV0dXJuIGVudHJpZXNbMF0gPyBOdW1iZXIoZW50cmllc1swXVswXSkgOiAxMjtcclxufVxyXG5cclxuZnVuY3Rpb24gY2FsY3VsYXRlU3RyZWFrRGF5cyhpbnRlcmFjdGlvbnM6IGFueVtdKSB7XHJcbiAgY29uc3QgZGF5U2V0ID0gbmV3IFNldChcclxuICAgIGludGVyYWN0aW9ucy5tYXAoaSA9PiBpLnRpbWVzdGFtcC5zcGxpdCgnVCcpWzBdKVxyXG4gICk7XHJcbiAgY29uc3QgdW5pcXVlRGF5cyA9IEFycmF5LmZyb20oZGF5U2V0KS5zb3J0KCk7XHJcbiAgXHJcbiAgbGV0IGN1cnJlbnRTdHJlYWsgPSAwO1xyXG4gIFxyXG4gIGZvciAobGV0IGkgPSB1bmlxdWVEYXlzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICBjb25zdCBjdXJyZW50ID0gbmV3IERhdGUodW5pcXVlRGF5c1tpXSk7XHJcbiAgICBjb25zdCBleHBlY3RlZCA9IG5ldyBEYXRlKCk7XHJcbiAgICBleHBlY3RlZC5zZXREYXRlKGV4cGVjdGVkLmdldERhdGUoKSAtIGN1cnJlbnRTdHJlYWspO1xyXG4gICAgXHJcbiAgICBpZiAoY3VycmVudC50b0RhdGVTdHJpbmcoKSA9PT0gZXhwZWN0ZWQudG9EYXRlU3RyaW5nKCkpIHtcclxuICAgICAgY3VycmVudFN0cmVhaysrO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIHJldHVybiBjdXJyZW50U3RyZWFrO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYWxjdWxhdGVDb21wbGV0aW9uUmF0ZShhcHBsaWNhdGlvbnM6IGFueVtdKSB7XHJcbiAgaWYgKGFwcGxpY2F0aW9ucy5sZW5ndGggPT09IDApIHJldHVybiAwO1xyXG4gIFxyXG4gIGNvbnN0IGNvbXBsZXRlZCA9IGFwcGxpY2F0aW9ucy5maWx0ZXIoYXBwID0+IFxyXG4gICAgYXBwLmFwcGxpY2F0aW9uX3N0YXR1cyA9PT0gJ2FwcHJvdmVkJyB8fCBcclxuICAgIGFwcC5hcHBsaWNhdGlvbl9zdGF0dXMgPT09ICdyZWplY3RlZCdcclxuICApLmxlbmd0aDtcclxuICBcclxuICByZXR1cm4gTWF0aC5yb3VuZCgoY29tcGxldGVkIC8gYXBwbGljYXRpb25zLmxlbmd0aCkgKiAxMDApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZUluc2lnaHRzKGludGVyYWN0aW9uczogYW55W10sIGFwcGxpY2F0aW9uczogYW55W10sIGJvb2ttYXJrczogYW55W10pIHtcclxuICBjb25zdCBpbnNpZ2h0cyA9IFtdO1xyXG4gIFxyXG4gIC8vIEFjdGl2aXR5IGluc2lnaHRzXHJcbiAgaWYgKGludGVyYWN0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zdCByZWNlbnRBY3Rpdml0eSA9IGludGVyYWN0aW9ucy5zbGljZSgwLCAxMCk7XHJcbiAgICBjb25zdCB1bmlxdWVUeXBlcyA9IG5ldyBTZXQocmVjZW50QWN0aXZpdHkubWFwKGkgPT4gaS5pbnRlcmFjdGlvbl90eXBlKSk7XHJcbiAgICBcclxuICAgIGlmICh1bmlxdWVUeXBlcy5zaXplID4gMykge1xyXG4gICAgICBpbnNpZ2h0cy5wdXNoKHtcclxuICAgICAgICB0eXBlOiAncG9zaXRpdmUnLFxyXG4gICAgICAgIHRpdGxlOiAnR3JlYXQgRW5nYWdlbWVudCEnLFxyXG4gICAgICAgIG1lc3NhZ2U6IGBZb3UncmUgYWN0aXZlbHkgdXNpbmcgJHt1bmlxdWVUeXBlcy5zaXplfSBkaWZmZXJlbnQgZmVhdHVyZXMuIEtlZXAgZXhwbG9yaW5nIWBcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIC8vIEFwcGxpY2F0aW9uIGluc2lnaHRzXHJcbiAgaWYgKGFwcGxpY2F0aW9ucy5sZW5ndGggPiAwKSB7XHJcbiAgICBjb25zdCBwZW5kaW5nQXBwcyA9IGFwcGxpY2F0aW9ucy5maWx0ZXIoYXBwID0+IFxyXG4gICAgICBhcHAuYXBwbGljYXRpb25fc3RhdHVzID09PSAnc3VibWl0dGVkJyB8fCBcclxuICAgICAgYXBwLmFwcGxpY2F0aW9uX3N0YXR1cyA9PT0gJ3VuZGVyX3JldmlldydcclxuICAgICkubGVuZ3RoO1xyXG4gICAgXHJcbiAgICBpZiAocGVuZGluZ0FwcHMgPiAwKSB7XHJcbiAgICAgIGluc2lnaHRzLnB1c2goe1xyXG4gICAgICAgIHR5cGU6ICdpbmZvJyxcclxuICAgICAgICB0aXRsZTogJ0FwcGxpY2F0aW9ucyBpbiBQcm9ncmVzcycsXHJcbiAgICAgICAgbWVzc2FnZTogYFlvdSBoYXZlICR7cGVuZGluZ0FwcHN9IGFwcGxpY2F0aW9ucyBiZWluZyBwcm9jZXNzZWQuIFdlJ2xsIG5vdGlmeSB5b3Ugb2YgdXBkYXRlcyFgXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICAvLyBSZWNvbW1lbmRhdGlvbiBpbnNpZ2h0c1xyXG4gIGlmIChib29rbWFya3MubGVuZ3RoID4gMikge1xyXG4gICAgaW5zaWdodHMucHVzaCh7XHJcbiAgICAgIHR5cGU6ICdzdWdnZXN0aW9uJyxcclxuICAgICAgdGl0bGU6ICdSZWFkeSB0byBBcHBseT8nLFxyXG4gICAgICBtZXNzYWdlOiBgWW91J3ZlIGJvb2ttYXJrZWQgJHtib29rbWFya3MubGVuZ3RofSBzY2hlbWVzLiBDb25zaWRlciBhcHBseWluZyB0byB0aGUgb25lcyB0aGF0IG1hdGNoIHlvdXIgcHJvZmlsZSBiZXN0IWBcclxuICAgIH0pO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gaW5zaWdodHM7XHJcbn1cclxuXHJcbi8vIERlbW8gZGF0YSBmdW5jdGlvbiBmb3Igd2hlbiB1c2VyIGlzIG5vdCBhdXRoZW50aWNhdGVkXHJcbmZ1bmN0aW9uIGdldERlbW9BbmFseXRpY3NEYXRhKCkge1xyXG4gIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgY29uc3QgZGFpbHlBY3Rpdml0eSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDcgfSwgKF8sIGkpID0+ICh7XHJcbiAgICBkYXRlOiBuZXcgRGF0ZShub3cuZ2V0VGltZSgpIC0gKDYgLSBpKSAqIDI0ICogNjAgKiA2MCAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcclxuICAgIGludGVyYWN0aW9uczogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTUpICsgNSxcclxuICAgIHNjaGVtZXNfdmlld2VkOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA4KSArIDIsXHJcbiAgICBhcHBsaWNhdGlvbnM6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDMpXHJcbiAgfSkpO1xyXG5cclxuICBjb25zdCB3ZWVrbHlFbmdhZ2VtZW50ID0gW1xyXG4gICAgeyBkYXk6ICdNb24nLCBwYWdlX3ZpZXdzOiAxMiwgc2VhcmNoZXM6IDgsIGFwcGxpY2F0aW9uczogMiB9LFxyXG4gICAgeyBkYXk6ICdUdWUnLCBwYWdlX3ZpZXdzOiAxNSwgc2VhcmNoZXM6IDYsIGFwcGxpY2F0aW9uczogMSB9LFxyXG4gICAgeyBkYXk6ICdXZWQnLCBwYWdlX3ZpZXdzOiAxOCwgc2VhcmNoZXM6IDEwLCBhcHBsaWNhdGlvbnM6IDMgfSxcclxuICAgIHsgZGF5OiAnVGh1JywgcGFnZV92aWV3czogMTQsIHNlYXJjaGVzOiA3LCBhcHBsaWNhdGlvbnM6IDEgfSxcclxuICAgIHsgZGF5OiAnRnJpJywgcGFnZV92aWV3czogMjAsIHNlYXJjaGVzOiAxMiwgYXBwbGljYXRpb25zOiA0IH0sXHJcbiAgICB7IGRheTogJ1NhdCcsIHBhZ2Vfdmlld3M6IDgsIHNlYXJjaGVzOiA0LCBhcHBsaWNhdGlvbnM6IDAgfSxcclxuICAgIHsgZGF5OiAnU3VuJywgcGFnZV92aWV3czogNiwgc2VhcmNoZXM6IDMsIGFwcGxpY2F0aW9uczogMSB9XHJcbiAgXTtcclxuXHJcbiAgY29uc3QgYXBwbGljYXRpb25TdGF0dXMgPSBbXHJcbiAgICB7IHN0YXR1czogJ2FwcHJvdmVkJywgY291bnQ6IDUsIHBlcmNlbnRhZ2U6IDI1IH0sXHJcbiAgICB7IHN0YXR1czogJ3VuZGVyX3JldmlldycsIGNvdW50OiA4LCBwZXJjZW50YWdlOiA0MCB9LFxyXG4gICAgeyBzdGF0dXM6ICdzdWJtaXR0ZWQnLCBjb3VudDogNCwgcGVyY2VudGFnZTogMjAgfSxcclxuICAgIHsgc3RhdHVzOiAnZHJhZnQnLCBjb3VudDogMywgcGVyY2VudGFnZTogMTUgfVxyXG4gIF07XHJcblxyXG4gIGNvbnN0IGludGVyYWN0aW9uVHlwZXMgPSB7XHJcbiAgICBwYWdlX3ZpZXc6IDQ1LFxyXG4gICAgc2NoZW1lX3NlYXJjaDogMjUsXHJcbiAgICBjaGF0X21lc3NhZ2U6IDEyLFxyXG4gICAgZG9jdW1lbnRfdXBsb2FkOiA4LFxyXG4gICAgcHJvZmlsZV91cGRhdGU6IDUsXHJcbiAgICB2b2ljZV9xdWVyeTogNVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IG1ldHJpY3MgPSB7XHJcbiAgICB0b3RhbEludGVyYWN0aW9uczogODUsXHJcbiAgICBhdmVyYWdlRGFpbHk6IDEyLjEsXHJcbiAgICBzdHJlYWtEYXlzOiA1LFxyXG4gICAgbW9zdEFjdGl2ZURheTogJ0ZyaWRheScsXHJcbiAgICB0b3RhbEFwcGxpY2F0aW9uczogMTIsXHJcbiAgICBzdWNjZXNzUmF0ZTogNjVcclxuICB9O1xyXG5cclxuICBjb25zdCBpbnNpZ2h0cyA9IFtcclxuICAgIHtcclxuICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxyXG4gICAgICB0aXRsZTogJ0dyZWF0IFByb2dyZXNzIScsXHJcbiAgICAgIG1lc3NhZ2U6ICdZb3VcXCd2ZSBiZWVuIGNvbnNpc3RlbnRseSBhY3RpdmUgZm9yIDUgZGF5cyBzdHJhaWdodC4gS2VlcCB1cCB0aGUgZ29vZCB3b3JrISdcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgIHR5cGU6ICdpbmZvJyxcclxuICAgICAgdGl0bGU6ICdBcHBsaWNhdGlvbnMgaW4gUHJvZ3Jlc3MnLFxyXG4gICAgICBtZXNzYWdlOiAnWW91IGhhdmUgOCBhcHBsaWNhdGlvbnMgYmVpbmcgcHJvY2Vzc2VkLiBXZVxcJ2xsIG5vdGlmeSB5b3Ugb2YgdXBkYXRlcyEnXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICB0eXBlOiAnc3VnZ2VzdGlvbicsXHJcbiAgICAgIHRpdGxlOiAnUmVhZHkgdG8gQXBwbHk/JyxcclxuICAgICAgbWVzc2FnZTogJ1lvdVxcJ3ZlIGJvb2ttYXJrZWQgNiBzY2hlbWVzLiBDb25zaWRlciBhcHBseWluZyB0byB0aGUgb25lcyB0aGF0IG1hdGNoIHlvdXIgcHJvZmlsZSBiZXN0ISdcclxuICAgIH1cclxuICBdO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgdG90YWxJbnRlcmFjdGlvbnM6IDg1LFxyXG4gICAgdG90YWxBcHBsaWNhdGlvbnM6IDEyLFxyXG4gICAgdG90YWxCb29rbWFya3M6IDYsXHJcbiAgICBpbnRlcmFjdGlvbnNCeVR5cGU6IGludGVyYWN0aW9uVHlwZXMsXHJcbiAgICBkYWlseUFjdGl2aXR5LFxyXG4gICAgYXBwbGljYXRpb25TdGF0czoge1xyXG4gICAgICB0b3RhbDogMTIsXHJcbiAgICAgIGJ5U3RhdHVzOiB7XHJcbiAgICAgICAgYXBwcm92ZWQ6IDUsXHJcbiAgICAgICAgdW5kZXJfcmV2aWV3OiA4LFxyXG4gICAgICAgIHN1Ym1pdHRlZDogNCxcclxuICAgICAgICBkcmFmdDogM1xyXG4gICAgICB9LFxyXG4gICAgICByZWNlbnRBcHBsaWNhdGlvbnM6IFtdXHJcbiAgICB9LFxyXG4gICAgcG9wdWxhckNhdGVnb3JpZXM6IHtcclxuICAgICAgJ0hvdXNpbmcnOiAzLFxyXG4gICAgICAnQWdyaWN1bHR1cmUnOiAyLFxyXG4gICAgICAnSGVhbHRoJzogMVxyXG4gICAgfSxcclxuICAgIGVuZ2FnZW1lbnQ6IHtcclxuICAgICAgYXZnSW50ZXJhY3Rpb25zUGVyRGF5OiAxMi4xLFxyXG4gICAgICBtb3N0QWN0aXZlSG91cjogMTQsXHJcbiAgICAgIHN0cmVha0RheXM6IDUsXHJcbiAgICAgIGNvbXBsZXRpb25SYXRlOiA2NVxyXG4gICAgfSxcclxuICAgIGluc2lnaHRzLFxyXG4gICAgdGltZWZyYW1lOiAnN2QnLFxyXG4gICAgaXNEZW1vOiB0cnVlXHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlUm91dGVIYW5kbGVyQ2xpZW50IiwiY29va2llcyIsIkdFVCIsInJlcXVlc3QiLCJzdXBhYmFzZSIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsInRpbWVmcmFtZSIsImdldCIsInVzZXJJZCIsImRhdGEiLCJ1c2VyIiwiZXJyb3IiLCJhdXRoRXJyb3IiLCJhdXRoIiwiZ2V0VXNlciIsImNvbnNvbGUiLCJsb2ciLCJpZCIsIm5vdyIsIkRhdGUiLCJkYXlzQmFjayIsInN0YXJ0RGF0ZSIsImdldFRpbWUiLCJpbnRlcmFjdGlvbnMiLCJpbnRlcmFjdGlvbnNFcnJvciIsImZyb20iLCJzZWxlY3QiLCJlcSIsImd0ZSIsInRvSVNPU3RyaW5nIiwib3JkZXIiLCJhc2NlbmRpbmciLCJhcHBsaWNhdGlvbnMiLCJhcHBsaWNhdGlvbnNFcnJvciIsImJvb2ttYXJrcyIsImJvb2ttYXJrc0Vycm9yIiwiYW5hbHl0aWNzIiwidG90YWxJbnRlcmFjdGlvbnMiLCJsZW5ndGgiLCJ0b3RhbEFwcGxpY2F0aW9ucyIsInRvdGFsQm9va21hcmtzIiwiaW50ZXJhY3Rpb25zQnlUeXBlIiwicmVkdWNlIiwiYWNjIiwiaXRlbSIsImludGVyYWN0aW9uX3R5cGUiLCJkYWlseUFjdGl2aXR5IiwiZ2VuZXJhdGVEYWlseUFjdGl2aXR5IiwiYXBwbGljYXRpb25TdGF0cyIsInRvdGFsIiwiYnlTdGF0dXMiLCJhcHBsaWNhdGlvbl9zdGF0dXMiLCJyZWNlbnRBcHBsaWNhdGlvbnMiLCJzbGljZSIsInBvcHVsYXJDYXRlZ29yaWVzIiwic2NoZW1lX2NhdGVnb3J5IiwiZW5nYWdlbWVudCIsImF2Z0ludGVyYWN0aW9uc1BlckRheSIsIk1hdGgiLCJyb3VuZCIsIm1vc3RBY3RpdmVIb3VyIiwiZ2V0TW9zdEFjdGl2ZUhvdXIiLCJzdHJlYWtEYXlzIiwiY2FsY3VsYXRlU3RyZWFrRGF5cyIsImNvbXBsZXRpb25SYXRlIiwiY2FsY3VsYXRlQ29tcGxldGlvblJhdGUiLCJpbnNpZ2h0cyIsImdlbmVyYXRlSW5zaWdodHMiLCJpc0RlbW8iLCJnZW5lcmF0ZWRBdCIsImpzb24iLCJyZWFsRGF0YUVycm9yIiwiZ2V0RGVtb0FuYWx5dGljc0RhdGEiLCJzdGF0dXMiLCJlbmREYXRlIiwiZGFpbHlEYXRhIiwiY3VycmVudCIsImRheVN0ciIsInNwbGl0IiwiZGF5SW50ZXJhY3Rpb25zIiwiZmlsdGVyIiwiaSIsInRpbWVzdGFtcCIsInN0YXJ0c1dpdGgiLCJwdXNoIiwiZGF0ZSIsInR5cGVzIiwic2V0RGF0ZSIsImdldERhdGUiLCJob3VyQ291bnRzIiwiaG91ciIsImdldEhvdXJzIiwiZW50cmllcyIsIk9iamVjdCIsInNvcnQiLCJhIiwiYiIsIk51bWJlciIsImRheVNldCIsIlNldCIsIm1hcCIsInVuaXF1ZURheXMiLCJBcnJheSIsImN1cnJlbnRTdHJlYWsiLCJleHBlY3RlZCIsInRvRGF0ZVN0cmluZyIsImNvbXBsZXRlZCIsImFwcCIsInJlY2VudEFjdGl2aXR5IiwidW5pcXVlVHlwZXMiLCJzaXplIiwidHlwZSIsInRpdGxlIiwibWVzc2FnZSIsInBlbmRpbmdBcHBzIiwiXyIsImZsb29yIiwicmFuZG9tIiwic2NoZW1lc192aWV3ZWQiLCJ3ZWVrbHlFbmdhZ2VtZW50IiwiZGF5IiwicGFnZV92aWV3cyIsInNlYXJjaGVzIiwiYXBwbGljYXRpb25TdGF0dXMiLCJjb3VudCIsInBlcmNlbnRhZ2UiLCJpbnRlcmFjdGlvblR5cGVzIiwicGFnZV92aWV3Iiwic2NoZW1lX3NlYXJjaCIsImNoYXRfbWVzc2FnZSIsImRvY3VtZW50X3VwbG9hZCIsInByb2ZpbGVfdXBkYXRlIiwidm9pY2VfcXVlcnkiLCJtZXRyaWNzIiwiYXZlcmFnZURhaWx5IiwibW9zdEFjdGl2ZURheSIsInN1Y2Nlc3NSYXRlIiwiYXBwcm92ZWQiLCJ1bmRlcl9yZXZpZXciLCJzdWJtaXR0ZWQiLCJkcmFmdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/analytics/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/ws","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/isows","vendor-chunks/set-cookie-parser","vendor-chunks/jose"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fanalytics%2Froute&page=%2Fapi%2Fanalytics%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fanalytics%2Froute.ts&appDir=C%3A%5CUsers%5Carnav%5COneDrive%5CDesktop%5CScheme-Saathi%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Carnav%5COneDrive%5CDesktop%5CScheme-Saathi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();